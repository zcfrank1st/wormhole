<?xml version="1.0" encoding="UTF-8"?>

<job id="hivereader_to_hbasewriter_job">
  <reader>
    <plugin>hivereader</plugin>
    <path>jdbc:hive://10.1.1.161:10000/default</path>
    <username></username>
    <password></password>
    <sql>select row_key,dealgrp_id,site_id,site_name,is_online,shop_id,shopgrp_id,start_ts,due_ts,title_desc,url_key,deal_sales_amt,deal_sales_cnt,deal_visit_cnt from bi.dprpt_shop_deal_profile_service_cdc_delta</sql>
    <mode>READ_FROM_LOCAL</mode>
    <dataDir>hdfs://10.2.6.102/tmp/</dataDir>
    <reduceNumber>-1</reduceNumber>
    <concurrency>1</concurrency>
  </reader>
  <writer>
    <plugin>hbasewriter</plugin>
    <htable>bi.dprpt_shop_deal_profile_service</htable>
    <autoFlush>false</autoFlush>
    <writebufferSize>1048576</writebufferSize>
    <writeAheadLog>true</writeAheadLog>
    <rowKeyIndex>0</rowKeyIndex>
    <columnsName>dim:dealgrp_id,dim:site_id,dim:site_name,dim:is_online,dim:shop_id,dim:shopgrp_id,dim:start_ts,dim:due_ts,dim:title_desc,dim:url_key,dim:deal_sales_amt,dim:deal_sales_cnt,dim:deal_visit_cnt</columnsName>
    <deleteMode>0</deleteMode>
    <rollbackMode>0</rollbackMode>
    <concurrency>1</concurrency>
    <write_sleep>false</write_sleep>
    <wait_time>1000</wait_time>
    <num_to_wait>1000</num_to_wait>
    <secondsDecTimeStamp>21600</secondsDecTimeStamp>
    <isDeleteData>false</isDeleteData>
    <isMajor_Compact>true</isMajor_Compact>
    <hiveConnectionUrl>jdbc:hive://10.1.1.161:10000/default</hiveConnectionUrl>
    <doPostDeleteDataFromHive>true</doPostDeleteDataFromHive>
    <selectRowkeysQuery>select row_key from bi.dprpt_shop_deal_profile_service_cdc_del</selectRowkeysQuery>
    <clusterConfigName>hbase-site-nanhui.xml</clusterConfigName>
  </writer>
</job>
